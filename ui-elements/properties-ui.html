<link rel="import" href="../components/polymer/polymer.html">

<polymer-element name="properties-ui" attributes="selectedObject selectedObjects">
  <template>
      <template if="{{selectedObject}}">
        <ui-base>
          <div style="height:100%;width:100%">
            <input type="color"  step="0.1" value="{{selectedObject.material.color | colorConvert}}"/> 
            p: <input type="number" step="0.1" value="{{selectedObject.position.x | toFixed(2)}}" />
            <input type="number" step="0.1" value="{{selectedObject.position.y | toFixed(2)}}"/>
            <input type="number" step="0.1" value="{{selectedObject.position.z | toFixed(2)}}"/>
            &nbsp
            r: <input type="number" step="0.1" value="{{selectedObject.rotation.x | angleConvert | toFixed(2)}}"/>
            <input type="number" step="0.1" value="{{selectedObject.rotation.y | angleConvert | toFixed(2)}}"/>
            <input type="number" step="0.1" value="{{selectedObject.rotation.z | angleConvert | toFixed(2)}}"/>
            &nbsp
            s: <input type="number" step="0.1" value="{{selectedObject.scale.x | toFixed(2)}}"/>
            <input type="number" step="0.1" value="{{selectedObject.scale.y | toFixed(2)}}"/>
            <input type="number" step="0.1" value="{{selectedObject.scale.z | toFixed(2)}}"/>
          </div>
        </ui-base>  
      </template>
  </template>
<script>
Polymer("properties-ui",{
  degreeAngles:true,
  //filters
  //round to 2 decimals
  toFixed:{
    toDOM: function(value, precision) {
      if(!value) return "0";
      return value.toFixed(precision);
    },
    toModel: function(value) {
      return parseFloat( value );
    }
  },
  //convert between radians and degrees
  angleConvert: {
   toDOM: function(value, precision) {
      if(!value) return 0;
      if(this.degreeAngles) return value*180/Math.PI;
      return value;
    },
    toModel: function(value) {
      if(this.degreeAngles) return parseFloat( value )*Math.PI/180;
      return value;
    }
  },
  //convert between html hex color and three.js color
  colorConvert: {
    toDOM: function(value) {
      if(!value) return "#ffffff";
      var hexValue = "#"+value.getHexString()
      return hexValue;
    },
    toModel: function(value) {
      return new THREE.Color(value);
    }
  }

});
</script>
</polymer-element>

