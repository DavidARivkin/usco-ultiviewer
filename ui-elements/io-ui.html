<link rel="import" href="../components/polymer/polymer.html">

<script src="../io/SceneSerializer.js"></script>
<script src="../io/FileSaver.min.js"></script>

<polymer-element name="io-ui" attributes="selectedObject resources activeScene">
  <template>
    <section>
       <tooltip-shadow-button label="save scene" value="saveScene" icon="save" on-tap="{{saveSceneHandler}}" >
       </tooltip-shadow-button>
    </section> 
  </template>
<script>
Polymer("io-ui",{
  activeScene:null,
  
  //custom element lifecycle callbacks
  ready:function(){
    this.sceneSerializer = new SceneSerializer();
  },
  //event handlers
  saveSceneHandler:function( event ){
    console.log("saving the scene");
    /*console.log("activeScene",this.activeScene);
    console.log("resources",this.resources);*/
    var sceneOutput = this.sceneSerializer.serialize( this.activeScene );
    console.log(sceneOutput);
    var sceneTextOutput =  JSON.stringify( sceneOutput );
    var blob = new Blob([sceneTextOutput], {type: "application/json;charset=utf-8"});
    //saveAs(blob, "testScene.json");
  },
  //attribute change handlers
  activeSceneChanged:function(){
    //console.log("activeSceneChanged",this.activeScene);
  },
  selectedObjectChanged:function(){
    //console.log("selectedObject",this.selectedObject);
  }
});
</script>
</polymer-element>

