<link rel="import" href="../components/polymer/polymer.html">

<script>
 (function(scope) {
    scope.dragAndDropMixin = {
      initDragAndDrop:function(){
        this.addEventListener("dragover", this.handleDragOver, false);
        this.addEventListener("drop", this.handleDrop, false);
      },
      detachDragAndDrop:function(){
        this.removeEventListener("dragover", this.handleDragOver);
        this.removeEventListener("drop"    , this.handleDrop);
      },
      handleDragOver:function(e) {
        if (e.preventDefault) {
          e.preventDefault();
        }
      },
      handleDrop:function(e)
      {
        if (e.preventDefault) {
          e.preventDefault(); // Necessary. Allows us to drop.
        }
        e.dataTransfer.dropEffect = 'copy'; 
        console.log("e",e,e.dataTransfer)
      
        var data = e.dataTransfer.getData("url");
        if( data!= "")
        {
          this.asyncFire('url-dropped', {data:data} );
          return;
        }
        
        var data=e.dataTransfer.getData("Text");
        if( data!= "" ){
            this.asyncFire('text-dropped', {data:data} );
            return;
        }

        var files = e.dataTransfer.files;
        if(files)
        {
          this.asyncFire('files-dropped', {data:files});
          return;
        }
      }
    },
   scope.fullScreenMixin = {
     initFullScreen:function(){
       if (this.requestFullscreen) document.addEventListener("fullscreenchange", this.onFullScreenChange.bind(this), false);
       if (this.mozRequestFullScreen) document.addEventListener("mozfullscreenchange", this.onFullScreenChange.bind(this), false);
       if (this.msRequestFullScreen) document.addEventListener("msfullscreenchange", this.onFullScreenChange.bind(this), false);
       if (this.webkitRequestFullScreen) document.addEventListener("webkitfullscreenchange", this.onFullScreenChange.bind(this), false);
     },
     
     onFullScreenChange:function()
     {
      console.log("fullscreenchanged");
      //workaround to reset this.fullScreen to correct value when pressing exit etc in full screen mode
      this.fullScreen = !(!document.fullscreenElement &&    // alternative standard method
      !document.mozFullScreenElement && !document.webkitFullscreenElement);
     },
      fullScreenChanged:function()
      {
        if(this.fullScreen)
        {
          if(this.requestFullScreen)      this.requestFullScreen();
          if(this.webkitRequestFullScreen)this.webkitRequestFullScreen();
          if(this.mozRequestFullScreen)   this.mozRequestFullScreen();
          if(this.msRequestFullscreen)    this.msRequestFullscreen();
        }
        else
        {
          if(document.cancelFullScreen) document.cancelFullScreen();
          if(document.webkitCancelFullScreen) document.webkitCancelFullScreen();
          if(document.mozCancelFullScreen) document.mozCancelFullScreen();
          if(document.msCancelFullScreen) document.msCancelFullScreen();
        }
      },
      handleFullScreen:function(e){
        this.fullScreen = true;
        return true
      }
   },
   scope.noScrollMixin = {
    attachNoScroll:function(){
      this.addEventListener("mousewheel"    , this._noScrollMouseWheelHandler, false);
      this.addEventListener("DOMMouseScroll", this._noScrollMouseWheelHandler, false);
    },
    detachNoScroll:function(){
      this.removeEventListener("mousewheel"    , this._noScrollMouseWheelHandler);
      this.removeEventListener("DOMMouseScroll", this._noScrollMouseWheelHandler);
    },
    //prevents scrolling whole page if using scroll & mouse is within viewer
    _noScrollMouseWheelHandler:function (event)
    {
        event.preventDefault();
        return false;
    },
    
   }
 })(Window);
</script>


